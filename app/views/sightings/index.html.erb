
<body>
  <% if !current_user or !current_user.is_researcher? %>
    <h3>Sorry, you need special permission to view this page. 
      Please log in <%=link_to 'here', "/login" %> with the approproate
      credintials to view this page.</h3>


  <%else %>
    <div class="container">
      <h1>Bird Sightings</h1>
    </div>

<div class="container">

  <table id ="table_id" class="table table-striped table-hover">
    <tr>
      <th>Name</th>
      <th>Location</th>
      <th>Type</th>
      <th>Singing</th>
      <th>Aggressive</th>
      <th>Flying</th>
      <th>Other</th>
      <th>Notes</th>
      <th>Time</th>
    </tr>

    <% @sightings.each do  |s| %>
       <% u=User.find( s.user_id) %>
      <tr>
        <td><%= u.name %> </td>
        <td class="locate" id="<%= s.location %>, "> <%= s.location %> </td>
        <td><%= s.typez %></td>

        <td class="singing" id="<%= s.singing %>"><%= s.singing %> </td>
        <td class="agressive" id="<%= s.aggressive %>"><%= s.aggressive %> </td>
        <td class="fying" id="<%= s.other %>"><%= s.flying %> </td>
        <td class="other" id="<%= s.other %>"><%= s.other %> </td>
        <td><%= s.notes %> </td>
        <td><%= s.created_at %> </td>
      </tr>
    <% end %> 
  </table>
</div>

<div class="container">
  <div class = "paginate">
    <%= will_paginate @sightings %>
  </div>
</div>
<div class="container">
  <p>Download: <%= link_to "CSV", sightings_path(format: "csv") %> </p>
</div>





<%end%>

<div id='map2'></div>
<nav id='filter-group' class='filter-group'></nav>


<style>
    #map2 { position:relative; height: 500px; width:50%; z-index: 2; margin: 0 auto; }
    .filter-group {
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        font-weight: 600;
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1;
        border-radius: 3px;
        width: 120px;
        color: #fff;
    }

    .filter-group input[type=checkbox]:first-child + label {
        border-radius: 3px 3px 0 0;
    }

    .filter-group label:last-child {
        border-radius: 0 0 3px 3px;
        border: none;
    }

    .filter-group input[type=checkbox] {
        display: none;
    }

    .filter-group input[type=checkbox] + label {
        background-color: #3386c0;
        display: block;
        cursor: pointer;
        padding: 10px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.25);
    }

    .filter-group input[type=checkbox] + label {
        background-color: #3386c0;
        text-transform: capitalize;
    }

    .filter-group input[type=checkbox] + label:hover,
    .filter-group input[type=checkbox]:checked + label {
        background-color: #4ea0da;
    }

    .filter-group input[type=checkbox]:checked + label:before {
        content: 'âœ”';
        margin-right: 5px;
    }
</style>


<%= javascript_include_tag 'mapbox-map-1.js'%>

</body>