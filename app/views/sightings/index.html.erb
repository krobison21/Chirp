
<body>
  <% if !current_user or !current_user.is_researcher? %>
    <h3>Sorry, you need special permission to view this page. 
      Please log in <%=link_to 'here', "/login" %> with the approproate
      credintials to view this page.</h3>


  <%else %>
    <div class="container">
      <h1>Bird Sightings</h1>
    </div>

<div class="container">


  <table id ="table_id" class="table table-striped table-hover"
    <tr>
      <th class="col-sm-1">Name</th>
      <th class="col-sm-2">Location</th>
      <th class="col-sm-1">Type</th>
      <th class="col-sm-1">Singing</th>
      <th class="col-sm-1">Aggressive</th>
      <th class="col-sm-1">Flying</th>
      <th class="col-sm-1">Other</th>
      <th class="col-sm-3">Notes</th>
      <th class="col-sm-1">Time</th>
    </tr>

    <% @sightings.each do  |s| %>
       <% u=User.find( s.user_id) %>
      <tr>
        <td><%= u.name %> </td>
        <td class="locate" id="<%= s.location %>, "> <%= s.location %> </td>
        <td><%= s.typez %></td>

        <td class="singing" id="<%= s.singing %>"><%= s.singing %> </td>
        <td class="agressive" id="<%= s.aggressive %>"><%= s.aggressive %> </td>
        <td class="fying" id="<%= s.other %>"><%= s.flying %> </td>
        <td class="other" id="<%= s.other %>"><%= s.other %> </td>
        <td><%= s.notes %> </td>
      
        <td><%= s.created_at %> </td>
      </tr>
    <% end %> 
  </table>
</div>

<div class="container">
  <div class = "paginate">
    <%= will_paginate @sightings %>
  </div>
</div>
<div class="container">
  <button type="button" class="btn btn-default"><%= link_to "Download CSV", sightings_path(format: "csv") %></button>
</div>





<%end%>

<div id='map2'></div>
<nav id='filter-group' class='filter-group'></nav>


<style>
    #map2 { position:relative; height: 500px; width:50%; z-index: 2; margin: 0 auto; }
    .mapboxgl-ctrl-bottom-right{
      visibility:hidden;
      display:none;
      background-color:black;
    }
    
    .mapboxgl-marker:hover{
      cursor: default;
      color: blue;
    }
    
    .mapboxgl-marker:hover{
    background-size: cover;
    color: #fff;
    text-align: center;
    margin: 0;
    padding: 15px 10px 15px;
    }
    
    
    min-height: 640px;
    
   /*.mapboxgl-ctrl-attrib{
    display: none;
    }
    .mapboxgl-ctrl{
      display: none;
    }*/
    
</style>


<%= javascript_include_tag 'mapbox-map-1.js'%>

</body>